;
; gcc zeropage footprint
;

.exportzp _sp0, _sp1, _fp0, _fp1
.exportzp _r0, _r1, _r2, _r3, _r4, _r5, _r6, _r7
.exportzp _s0, _s1, _s2, _s3, _s4, _s5, _s6, _s7
.exportzp _e0, _e1, _e2, _e3, _e4, _e5, _e6, _e7
.exportzp _e8, _e9, _e10, _e11, _e12, _e13, _e14, _e15
.exportzp _e16, _e17, _e18, _e19, _e20, _e21, _e22, _e23
.exportzp _e24, _e25, _e26, _e27, _e28, _e29, _e30, _e31
.exportzp _tmp0, _tmp1
.exportzp _sa, _sx, _sy

.segment "ZEROPAGE"
_sp0: .res 1
_sp1: .res 1
_fp0: .res 1
_fp1: .res 1
_r0: .res 1
_r1: .res 1
_r2: .res 1
_r3: .res 1
_r4: .res 1
_r5: .res 1
_r6: .res 1
_r7: .res 1
_s0: .res 1
_s1: .res 1
_s2: .res 1
_s3: .res 1
_s4: .res 1
_s5: .res 1
_s6: .res 1
_s7: .res 1
_e0: .res 1
_e1: .res 1
_e2: .res 1
_e3: .res 1
_e4: .res 1
_e5: .res 1
_e6: .res 1
_e7: .res 1
_e8: .res 1
_e9: .res 1
_e10: .res 1
_e11: .res 1
_e12: .res 1
_e13: .res 1
_e14: .res 1
_e15: .res 1
_e16: .res 1
_e17: .res 1
_e18: .res 1
_e19: .res 1
_e20: .res 1
_e21: .res 1
_e22: .res 1
_e23: .res 1
_e24: .res 1
_e25: .res 1
_e26: .res 1
_e27: .res 1
_e28: .res 1
_e29: .res 1
_e30: .res 1
_e31: .res 1
_tmp0: .res 1
_tmp1: .res 1
_sa: .res 1
_sx: .res 1
_sy: .res 1

;
; vectors placed at top 6 bytes of memory area
;

.segment "VECTORS"
.word nmi
.word reset
.word irq

;
; routines
;

.segment "CODE"

.import benched_routine

nmi:
reset:
irq:
	; Initialize C stack
	lda #$ff
	sta _sp0
	lda #$07
	sta _sp1

	; Call benched subroutine
	jsr benched_routine

	; Signal the emulator to exit
	lda #0
	sta $5000

	jmp irq

.segment "RODATA"

.export zipped_data

zipped_data:
.byt $00,$84
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                        1,   1,   2,   3,    4,   5,  $40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   1,   1,    2,   3,   4,   5, $00,$08
.byt                        6,   7,   8,   9,    10,  11, $40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   6,   7,    8,   9,   10,  11,$00,$08
.byt                        12,  13,  14,  15,   16,  17,  $00,$02, $01, $02, $03, $04,  $05, $06, $07, $00,$03,          12,  13,   14,  15,  16,  17,$00,$08
.byt                        18,  19,  20,  21,   22,  23,  $00,$02, $08, $09, $0a, $0b,  $0c, $0d, $0e, $0f,  $00,$02,    18,  19,   20,  21,  22,  23,$00,$08
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                        24,  25,  26,  27,    28,  29, $00,$02, $10, $11, $12, $13,  $14, $15, $16, $17,  $00,$02,    24,  25,   26,  27,  28,  29,$00,$08
.byt                        30,  31,  32,  33,    34,  35, $00,$02, $18, $19, $1a, $1b,  $1c, $1d, $1e, $1f,  $00,$02,    30,  31,   32,  33,  34,  35,$00,$08
.byt                        36,  37,  38,  39,    40,  41,$40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   36,  37,   38,  39,  40,  41,$00,$08
.byt                        42,  43,  44,  45,    46,  47,$40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   42,  43,   44,  45,  46,  47,$00,$07
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                $20,  $21, $22, $23, $24,  $25, $26, $27, $00,$0a,                                             $28, $21, $22,  $23, $24, $25, $26,  $27, $00,$09
.byt                                $29, $2a,  $00,$10,                                                                            $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$10,                                                                            $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$10,                                                                            $29, $2a, $00,$0c
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                                $29, $2a,  $00,$04,             $2b, $2c, $2c, $2c,  $2c, $2c, $2c, $2d,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $2e, $2f, $30, $30,  $30, $30, $30, $31,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $32, $33, $00,$02,   $30, $30, $30, $34,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $2e, $2f, $00,$02,   $30, $30, $30, $31,  $00,$04,             $29, $2a, $00,$06
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt $35, $36, $37, $38,  $39, $35, $29, $2a,  $38, $39, $35, $36,  $32, $33, $30, $30,  $00,$02,  $30, $34,  $35, $36, $37, $38,  $29, $2a, $36, $37,  $38, $39, $35, $36
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $2e, $2f, $30, $30,  $00,$02,  $30, $31,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $32, $33, $00,$02,   $30, $30, $30, $34,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $2e, $2f, $00,$02,   $30, $30, $30, $31,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $32, $33, $30, $30,  $00,$02,  $30, $34,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $2e, $2f, $30, $30,  $00,$02,  $30, $31,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $32, $33, $00,$02,   $30, $30, $30, $34,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3f, $3f, $3f, $3f,  $3f, $3f, $29, $2a,  $3f, $3f, $3f, $3f,  $2e, $2f, $00,$02,   $30, $30, $30, $31,  $3f, $3f, $3f, $3f,  $29, $2a, $3f, $3f,  $3f, $3f, $3f, $3f
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt $00,$06,                       $29, $2a,  $00,$04,             $32, $33, $30, $30,  $30, $30, $30, $34,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $2e, $2f, $30, $30,  $30, $30, $30, $31,  $00,$04,             $29, $2a, $00,$06
.byt $00,$00
