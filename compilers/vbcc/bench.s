;
; gcc zeropage footprint
;

.exportzp sp
.exportzp r0,   r1,  r2,  r3,  r4,  r5,  r6,  r7,  r8,  r9
.exportzp r10, r11, r12, r13, r14, r15, r16, r17, r18, r19
.exportzp r20, r21, r22, r23, r24, r25, r26, r27, r28, r29
.exportzp r30, r31
.exportzp btmp0, btmp1, btmp2, btmp3

.segment "ZEROPAGE"
sp: .res 2
r0: .res 1
r1: .res 1
r2: .res 1
r3: .res 1
r4: .res 1
r5: .res 1
r6: .res 1
r7: .res 1
r8: .res 1
r9: .res 1
r10: .res 1
r11: .res 1
r12: .res 1
r13: .res 1
r14: .res 1
r15: .res 1
r16: .res 1
r17: .res 1
r18: .res 1
r19: .res 1
r20: .res 1
r21: .res 1
r22: .res 1
r23: .res 1
r24: .res 1
r25: .res 1
r26: .res 1
r27: .res 1
r28: .res 1
r29: .res 1
r30: .res 1
r31: .res 1
btmp0: .res 1
btmp1: .res 1
btmp2: .res 1
btmp3: .res 1

;
; vectors placed at top 6 bytes of memory area
;

.segment "VECTORS"
.word nmi
.word reset
.word irq

;
; routines
;

.segment "MAIN"

.import _benched_routine

nmi:
reset:
irq:
	; Initialize C stack
	lda #$ff
	sta sp
	lda #$07
	sta sp+1

	; Call benched subroutine
	jsr _benched_routine

	; Signal the emulator to exit
	lda #0
	sta $5000

	jmp irq

.segment "RODATA"

.export _zipped_data

_zipped_data:
.byt $00,$84
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                        1,   1,   2,   3,    4,   5,  $40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   1,   1,    2,   3,   4,   5, $00,$08
.byt                        6,   7,   8,   9,    10,  11, $40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   6,   7,    8,   9,   10,  11,$00,$08
.byt                        12,  13,  14,  15,   16,  17,  $00,$02, $01, $02, $03, $04,  $05, $06, $07, $00,$03,          12,  13,   14,  15,  16,  17,$00,$08
.byt                        18,  19,  20,  21,   22,  23,  $00,$02, $08, $09, $0a, $0b,  $0c, $0d, $0e, $0f,  $00,$02,    18,  19,   20,  21,  22,  23,$00,$08
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                        24,  25,  26,  27,    28,  29, $00,$02, $10, $11, $12, $13,  $14, $15, $16, $17,  $00,$02,    24,  25,   26,  27,  28,  29,$00,$08
.byt                        30,  31,  32,  33,    34,  35, $00,$02, $18, $19, $1a, $1b,  $1c, $1d, $1e, $1f,  $00,$02,    30,  31,   32,  33,  34,  35,$00,$08
.byt                        36,  37,  38,  39,    40,  41,$40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   36,  37,   38,  39,  40,  41,$00,$08
.byt                        42,  43,  44,  45,    46,  47,$40, $40, $40, $40, $40, $40,  $40, $40, $40, $40,  $40, $40,   42,  43,   44,  45,  46,  47,$00,$07
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                $20,  $21, $22, $23, $24,  $25, $26, $27, $00,$0a,                                             $28, $21, $22,  $23, $24, $25, $26,  $27, $00,$09
.byt                                $29, $2a,  $00,$10,                                                                            $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$10,                                                                            $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$10,                                                                            $29, $2a, $00,$0c
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt                                $29, $2a,  $00,$04,             $2b, $2c, $2c, $2c,  $2c, $2c, $2c, $2d,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $2e, $2f, $30, $30,  $30, $30, $30, $31,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $32, $33, $00,$02,   $30, $30, $30, $34,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $2e, $2f, $00,$02,   $30, $30, $30, $31,  $00,$04,             $29, $2a, $00,$06
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt $35, $36, $37, $38,  $39, $35, $29, $2a,  $38, $39, $35, $36,  $32, $33, $30, $30,  $00,$02,  $30, $34,  $35, $36, $37, $38,  $29, $2a, $36, $37,  $38, $39, $35, $36
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $2e, $2f, $30, $30,  $00,$02,  $30, $31,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $32, $33, $00,$02,   $30, $30, $30, $34,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $2e, $2f, $00,$02,   $30, $30, $30, $31,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $32, $33, $30, $30,  $00,$02,  $30, $34,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $2e, $2f, $30, $30,  $00,$02,  $30, $31,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3a, $3a, $3a, $3a,  $3a, $3a, $29, $2a,  $3a, $3a, $3a, $3a,  $32, $33, $00,$02,   $30, $30, $30, $34,  $3a, $3a, $3a, $3a,  $29, $2a, $3a, $3a,  $3a, $3a, $3a, $3a
.byt $3f, $3f, $3f, $3f,  $3f, $3f, $29, $2a,  $3f, $3f, $3f, $3f,  $2e, $2f, $00,$02,   $30, $30, $30, $31,  $3f, $3f, $3f, $3f,  $29, $2a, $3f, $3f,  $3f, $3f, $3f, $3f
;    -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
.byt $00,$06,                       $29, $2a,  $00,$04,             $32, $33, $30, $30,  $30, $30, $30, $34,  $00,$04,             $29, $2a, $00,$0c
.byt                                $29, $2a,  $00,$04,             $2e, $2f, $30, $30,  $30, $30, $30, $31,  $00,$04,             $29, $2a, $00,$06
.byt $00,$00
